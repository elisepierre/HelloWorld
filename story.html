<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Témoignage - Hello World</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* ==============================
       1. VARIABLES & ESTHÉTIQUE
    ============================== */
    :root {
      --isima-blue-dark: #0d2c4d;
      --isima-blue-light: #005b96;
      --isima-yellow: #f3b749;
      --isima-red: #bf4b3b;
      --isima-green: #27ae60;
      --bg-color: #f8f9fa;
      --text-main: #2c3e50;
      --text-gray: #555555; /* Nouvelle variable pour le gris standard */
      --card-radius: 12px;
      --shadow: 0 10px 30px rgba(0,0,0,0.08);
      --discord-color: #5865F2;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Roboto', sans-serif; background: var(--bg-color); color: var(--text-main); line-height: 1.6; }
    h1, h2, h3 { font-family: 'Montserrat', sans-serif; }

    /* ==============================
       2. NAVBAR
    ============================== */
    .navbar {
      background: var(--isima-blue-dark); padding: 15px 30px; 
      display: flex; align-items: center; position: sticky; top: 0; z-index: 100;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2); height: 70px;
    }
    .btn-back { 
      color: white; cursor: pointer; transition: 0.3s; text-decoration: none; 
      display: flex; align-items: center; gap: 8px; font-weight: 500; z-index: 102;
    }
    .btn-back:hover { color: var(--isima-yellow); transform: translateX(-5px); }
    .brand-container {
      position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
      text-align: center; z-index: 101;
    }
    .brand { font-weight: 800; font-size: 1.4rem; letter-spacing: 1px; color: white; }
    .brand span { color: var(--isima-yellow); }

    /* ==============================
       3. HEADER & SLIDER
    ============================== */
    .story-header { position: relative; height: 55vh; overflow: hidden; background: #000; }
    .slide {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      opacity: 0; transition: opacity 0.8s ease-in-out; background-size: cover; background-position: center;
    }
    .slide.active { opacity: 1; }
    .header-overlay {
      position: absolute; bottom: 0; left: 0; width: 100%; height: 90%;
      background: linear-gradient(to top, var(--isima-blue-dark) 0%, rgba(13,44,77,0.4) 60%, transparent 100%); z-index: 2;
    }
    .header-content {
      position: absolute; bottom: 30px; left: 0; width: 100%; z-index: 3; color: white; text-align: center; padding: 0 20px;
    }
    .exp-title { font-size: 3rem; font-weight: 800; line-height: 1.1; margin-bottom: 5px; text-transform: uppercase; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
    .exp-place { font-size: 1.3rem; font-weight: 300; opacity: 0.9; margin-bottom: 20px; }
    .slider-nav {
      position: absolute; top: 50%; width: 100%; display: flex; justify-content: space-between; padding: 0 30px; z-index: 10; transform: translateY(-50%); pointer-events: none;
    }
    .slider-btn {
      pointer-events: auto; background: rgba(255,255,255,0.15); border: 2px solid rgba(255,255,255,0.6);
      color: white; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; backdrop-filter: blur(5px); transition: 0.3s;
    }
    .slider-btn:hover { background: var(--isima-yellow); color: var(--isima-blue-dark); border-color: var(--isima-yellow); }

    /* ==============================
       4. SÉLECTEUR DE TÉMOINS
    ============================== */
    .witness-selector {
      display: flex; justify-content: center; gap: 15px; margin: -25px auto 30px; 
      position: relative; z-index: 20; flex-wrap: wrap; padding: 0 10px;
    }
    .witness-tab {
      background: white; padding: 12px 25px; border-radius: 50px; cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1); font-weight: 700; color: var(--text-main);
      display: flex; align-items: center; gap: 10px; border: 2px solid transparent; transition: 0.3s;
    }
    .witness-tab img { width: 30px; height: 30px; border-radius: 50%; object-fit: cover; }
    .witness-tab.active {
      background: var(--isima-yellow); color: var(--isima-blue-dark); border-color: var(--isima-yellow); transform: translateY(-3px);
    }
    .witness-tab:hover:not(.active) { transform: translateY(-2px); background: #f0f0f0; }

    /* ==============================
       5. CONTENU & FORMATAGE
    ============================== */
    .main-container { max-width: 1100px; margin: 0 auto 60px; padding: 0 20px; }
    
    .student-meta { text-align: center; margin-bottom: 40px; animation: fadeIn 0.5s; }
    .meta-badges { display: flex; justify-content: center; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
    .badge { padding: 6px 15px; border-radius: 6px; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; background: #e0e6ed; color: var(--isima-blue-dark); }
    .badge-dates { background: #e3f2fd; color: #1565c0; }
    .badge-filiere { background: #fff3e0; color: #ef6c00; }

    .theme-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }

    .theme-card {
      background: white; padding: 30px; border-radius: var(--card-radius); box-shadow: var(--shadow);
      border-bottom: 4px solid var(--isima-blue-light); 
      transition: 0.3s; position: relative;
      animation: fadeInUp 0.5s ease-out;
      display: flex; flex-direction: column;
    }
    .theme-card:hover { transform: translateY(-5px); border-bottom-color: var(--isima-yellow); }
    
    .tc-header { display: flex; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
    .tc-icon { font-size: 1.5rem; color: var(--isima-blue-dark); margin-right: 15px; }
    .tc-title { font-size: 1.1rem; font-weight: 800; color: var(--isima-blue-dark); text-transform: uppercase; }
    
    /* --- CORRECTION COULEURS TEXTE --- */
    .tc-content { 
      font-size: 0.95rem; 
      color: var(--text-gray); /* Gris standard pour tout le monde */
      line-height: 1.6;
    }
    
    /* Gras en couleur sombre */
    .tc-content strong, .tc-content b { 
      color: var(--text-main); 
      font-weight: 700; 
    }
    
    /* Listes : Texte gris, Puces bleues */
    .tc-content ul { padding-left: 20px; margin: 10px 0; }
    .tc-content li { 
      margin-bottom: 5px; 
      list-style-type: disc; 
      color: var(--text-gray); /* Texte GRIS */
    }
    /* Ciblage spécifique pour la couleur de la puce (le rond) */
    .tc-content li::marker {
      color: var(--isima-blue-light);
    }

    /* --- CORRECTION TAILLE CADRES --- */
    .tc-content.clamped {
      max-height: 100px; /* <--- RÉDUIT À 100PX (Avant 180px) */
      overflow: hidden;
      position: relative;
      mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
      -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
    }

    /* BOUTON DÉROULER */
    .expand-btn {
      align-self: center;
      margin-top: 10px; /* Un peu plus près */
      background: var(--isima-blue-light);
      color: white;
      width: 30px; height: 30px; /* Plus petit et discret */
      border-radius: 50%;
      display: none; 
      align-items: center; justify-content: center;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid white;
      font-size: 0.8rem;
    }
    .expand-btn:hover { background: var(--isima-yellow); transform: scale(1.1); color: var(--isima-blue-dark); }
    .expand-btn.active { transform: rotate(180deg); background: var(--isima-blue-dark); }

    /* PROS & CONS */
    .pros-cons-container { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 40px; }
    .pc-card { 
      background: white; padding: 30px; border-radius: var(--card-radius); box-shadow: var(--shadow);
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .pc-card.pros { border-top: 5px solid var(--isima-green); }
    .pc-card.cons { border-top: 5px solid var(--isima-red); }
    .pc-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
    .pc-title { font-weight: 800; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
    .pc-list li { margin-bottom: 8px; list-style: none; padding-left: 20px; position: relative; }
    .pc-list li::before { content: '•'; position: absolute; left: 0; font-weight: bold; }

    /* FOOTER */
    .contact-footer { background: var(--isima-blue-dark); color: white; padding: 50px 20px; text-align: center; margin-top: 60px; border-radius: 20px 20px 0 0; }
    .contact-links { display: flex; justify-content: center; gap: 15px; margin-top: 25px; flex-wrap: wrap; }
    .contact-btn {
      background: rgba(255,255,255,0.1); color: white; padding: 12px 25px; border-radius: 50px; text-decoration: none; transition: 0.3s; display: flex; align-items: center; gap: 10px; font-weight: 600;
    }
    .contact-btn:hover { background: var(--isima-yellow); color: var(--isima-blue-dark); transform: translateY(-3px); }
    .btn-discord:hover { background: var(--discord-color); color: white; }
    .btn-linkedin:hover { background: #0077b5; color: white; }
    .btn-insta:hover { background: #E1306C; color: white; }

    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    @media (max-width: 768px) {
      .exp-title { font-size: 2rem; }
      .pros-cons-container { grid-template-columns: 1fr; }
      .witness-selector { flex-direction: column; align-items: center; gap: 10px; }
      .witness-tab { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>

  <nav class="navbar">
    <a href="#" class="btn-back" onclick="goBack()"><i class="fas fa-arrow-left"></i> Retour</a>
    <div class="brand-container">
      <div class="brand">HELLO <span>WORLD</span></div>
    </div>
  </nav>

  <header class="story-header">
    <div class="header-overlay"></div>
    <div id="slides-container"></div>
    <div class="header-content">
      <h1 class="exp-title" id="d-title">Chargement...</h1>
      <p class="exp-place"><i class="fas fa-map-marker-alt" style="color:var(--isima-yellow)"></i> <span id="d-location">...</span></p>
    </div>
    <div class="slider-nav">
      <button class="slider-btn" onclick="prevSlide()"><i class="fas fa-chevron-left"></i></button>
      <button class="slider-btn" onclick="nextSlide()"><i class="fas fa-chevron-right"></i></button>
    </div>
  </header>

  <div class="main-container">
    <div class="witness-selector" id="tabs-container"></div>

    <div id="witness-content">
      
      <div class="student-meta">
        <h2 style="color:var(--isima-blue-dark); font-size:2rem;">Témoignage de <span style="color:var(--isima-yellow)" id="w-name">...</span></h2>
        <div class="meta-badges">
          <span class="badge badge-filiere" id="w-filiere">Filière</span>
          <span class="badge badge-dates" id="w-dates">Dates</span>
          <span class="badge" id="w-type">Type</span>
        </div>
      </div>

      <div class="theme-grid">
        <div class="theme-card">
          <div class="tc-header"><i class="fas fa-passport tc-icon"></i><span class="tc-title">Visa & Administratifs</span></div>
          <div class="tc-content" id="txt-visa"></div>
          <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="theme-card">
          <div class="tc-header"><i class="fas fa-home tc-icon"></i><span class="tc-title">Logement</span></div>
          <div class="tc-content" id="txt-logement"></div>
          <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="theme-card">
          <div class="tc-header"><i class="fas fa-wallet tc-icon"></i><span class="tc-title">Budget</span></div>
          <div class="tc-content" id="txt-argent"></div>
          <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="theme-card">
          <div class="tc-header"><i class="fas fa-heartbeat tc-icon"></i><span class="tc-title">Santé</span></div>
          <div class="tc-content" id="txt-sante"></div>
          <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="theme-card">
          <div class="tc-header"><i class="fas fa-wifi tc-icon"></i><span class="tc-title">Télécoms</span></div>
          <div class="tc-content" id="txt-telecom"></div>
          <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="theme-card">
          <div class="tc-header"><i class="fas fa-coffee tc-icon"></i><span class="tc-title">Quotidien</span></div>
          <div class="tc-content" id="txt-quotidien"></div>
          <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="theme-card" style="grid-column: 1 / -1;">
          <div class="tc-header"><i class="fas fa-graduation-cap tc-icon"></i><span class="tc-title">Vie Universitaire / Professionnelle </span></div>
          <div class="tc-content" id="txt-univ"></div>
          <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
        </div>
      </div>

      <div class="pros-cons-container">
        <div class="pc-card pros">
          <div class="pc-title" style="color:var(--isima-green)"><i class="fas fa-thumbs-up"></i> Points Positifs</div>
          <ul class="pc-list" id="list-pros"></ul>
        </div>
        <div class="pc-card cons">
          <div class="pc-title" style="color:var(--isima-red)"><i class="fas fa-thumbs-down"></i> Points Négatifs</div>
          <ul class="pc-list" id="list-cons"></ul>
        </div>
      </div>
      
      <div class="theme-card" style="margin-top:30px; border-bottom-color:var(--isima-yellow);">
         <div class="tc-header"><i class="fas fa-lightbulb tc-icon" style="color:var(--isima-yellow)"></i><span class="tc-title">Derniers Conseils</span></div>
         <div class="tc-content" id="txt-conseils"></div>
         <div class="expand-btn" onclick="toggleText(this)"><i class="fas fa-chevron-down"></i></div>
      </div>

    </div> 
  </div>

  <footer class="contact-footer">
    <h3>Entrer en contact</h3>
    <p id="contact-text">Besoin de précisions ?</p>
    <div class="contact-links" id="contact-area"></div>
  </footer>

  <script>
    // ==========================================
    // DONNÉES
    // ==========================================
    const storiesDB = {
      "taiwan-yuanze": {
        title: "Échange à Yuan Ze University",
        location: "Taoyuan, Taïwan",
        countryId: "taiwan",
        witnesses: [
          {
            name: "Elise PIERRE",
            filiere: "F1",
            dates: "Février 2026 - Juin 2026",
            type: "Échange Académique",
            avatar: "",
            images: [
              "https://images.unsplash.com/photo-1552993873-0dd1110e025f?auto=format&fit=crop&w=1600&q=80", 
              "https://images.unsplash.com/photo-1508248467877-f8278075841b?auto=format&fit=crop&w=1600&q=80"
            ],
            // EXEMPLE DE TEXTE FORMATÉ HTML
            visa: "<ul><li><b>Passeport et VISA obligatoires</b> : Commencez vos démarches dès septembre si besoin !</li><li><b>Délais</b> : L'acceptation de l'école peut prendre du temps (reçue le 11 déc. 2025).</li><li><b>Billet d'avion</b> : Nécessaire pour la demande de visa. Coût env. 975€ (Eva Air sans escale).</li><li><b>Coût Visa</b> : 71€ pour le Visa à Entrée Simple au Bureau de Représentation de Taipei en France (délai 3 jours ouvrés, passeport physique requis).</li></ul>",
            logement: "Dortoirs sur le campus (économiques mais stricts)",
            argent: "<b>Coût de la vie très bas !</b><br>On mange dehors pour 3-4€. Transport pas cher. Budget total : 600-800€/mois tout confort.",
            sante: "Passeport et VISA obligatoires (si besoin, commencez vos démarches pour le passeport dès septembre si vous compter aller dans un pays hors UE)! L'acceptation de l'école prend un peu de temps, je ne l'ai reçu que le 11 décembre 2025 et nécessitera plusieurs démarches administratives (bilan santé, assurance, VISA...). Pour le VISA, nous devions présenter les billets d'avions aller-retour. À Eva Air, sans escale, les billets m'ont coûtés 974.93€, deux mois avant le départ.Enfin, j'ai pris un Visa à Entrée Simple au Bureau de Représentation de Taipei en France (sur place) qui m'a coûté 71€ pour qu'il me soit délivré en 3 jours ouvrés et non 7 (⚠ ils leur faut votre passeport physique, pas une copie).",
            telecom: "",
            quotidien: "",
            univ: "",
            conseils: "A",
            pros: [""],
            cons: [""],
            contact: { linkedin: "#", insta: "#", discord: "#", mail: "elise.pierre@isima.fr" }
          }
        ]
      },
      "canada-uqac": {
        title: "Échange à l'UQAC",
        location: "Chicoutimi, Québec",
        countryId: "canada",
        witnesses: [
          {
            name: "Thomas D.",
            filiere: "F2",
            dates: "Août 2023 - Déc 2023",
            type: "Échange",
            avatar: "https://randomuser.me/api/portraits/men/32.jpg",
            images: ["https://images.unsplash.com/photo-1433838552652-f9a46b332c40?auto=format&fit=crop&w=1600&q=80"],
            visa: "AVE suffisant (-6 mois). Coût 7$.",
            logement: "Résidence sur le campus. 350 CAD/mois. Ambiance géniale.",
            argent: "Budget 900€/mois. La vie est moins chère qu'à Montréal.",
            sante: "Assurance Desjardins obligatoire via l'UQAC.",
            telecom: "Wifi Campus + Carte prépayée pour urgences.",
            quotidien: "Beaucoup de nature, rando, soirées en résidence.",
            univ: "Cours pratiques, tutoiement des profs, projets de groupe.",
            conseils: "Louez une voiture pour explorer le fjord le week-end.",
            pros: ["Nature", "Coût vie", "Accueil"],
            cons: ["Froid", "Voiture nécessaire"],
            contact: { linkedin: "#", insta: "#", discord: "thomas#1234" }
          },
          {
            name: "Sarah",
            filiere: "F2",
            dates: "Jan 2023 - Mai 2023",
            type: "Échange",
            avatar: "", 
            images: ["https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&w=1600&q=80"],
            visa: "AVE également. Attention, il fait très froid en arrivant en janvier !",
            logement: "Coloc en ville à 10min en bus.",
            argent: "Un peu plus cher en hiver à cause de l'équipement.",
            sante: "RAS, assurance UQAC.",
            telecom: "Forfait Fido.",
            quotidien: "Raquettes, ski et chocolat chaud.",
            univ: "J'ai adoré les cours de gestion de projet.",
            conseils: "Le festival des glaces est à ne pas manquer.",
            pros: ["Neige", "Sécurité"],
            cons: ["Nuit tombe tôt en hiver"],
            contact: {} 
          },
          {
              name: "Elisa",
              filiere: "F2",
              dates: "Jan 2023 - Mai 2023",
              type: "Échange",
              avatar: "", 
              images: ["https://images.unsplash.com/photo-1519178173668-2fc416dde9e7?auto=format&fit=crop&w=1600&q=80"], 
              visa: "AVE.",
              logement: "Résidence.",
              univ: "Super cours.",
              contact: {} 
          }
        ]
      },
      "canada-ubisoft": {
        title: "Stage Ubisoft",
        location: "Montréal, Québec",
        countryId: "canada",
        witnesses: [
          {
            name: "Julie M.",
            filiere: "F3 - SI",
            dates: "Sept 2023 - Jan 2024",
            type: "Stage",
            avatar: "https://randomuser.me/api/portraits/women/68.jpg",
            images: ["https://images.unsplash.com/photo-1556075798-4825dfaaf498?auto=format&fit=crop&w=1600&q=80"],
            visa: "Permis Stage Coop (EIC). Démarches longues (3 mois).",
            logement: "Plateau Mont-Royal. Cher (700 CAD) mais top.",
            argent: "Vie chère, mais indemnité de stage correcte.",
            sante: "Formulaire SE-401-Q-102 (RAMQ).",
            telecom: "Fizz (100% online).",
            quotidien: "Ville souterraine, festivals, poutine.",
            univ: "Ambiance de travail incroyable, très pro et relax.",
            conseils: "Anticipez le visa c'est le plus stressant.",
            pros: ["Ambiance", "Tech", "Ville"],
            cons: ["Hiver", "Taxes"],
            contact: { linkedin: "#", discord: "julie_dev" }
          }
        ]
      },
      "uk-bradford": {
        title: "Erasmus à Bradford",
        location: "Bradford, Royaume-Uni",
        countryId: "uk",
        witnesses: [
          {
            name: "Clément VERIN",
            filiere: "F1",
            dates: "Février 2025 - Mai 2025",
            type: "Erasmus",
            avatar: "", 
            images: ["https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?auto=format&fit=crop&w=1600&q=80"],
            visa: "Depuis le Brexit, passeport obligatoire ! Statut visiteur pour moins de 6 mois.",
            logement: "The Green (résidence étudiante) est top et écolo.",
            argent: "Comptez 800-1000£ par mois tout compris.",
            sante: "CEAM + Assurance complémentaire conseillée.",
            telecom: "Giffgaff est très populaire (carte SIM commandable avant).",
            quotidien: "Bradford est multiculturelle. Proche de Leeds.",
            univ: "Université orientée pratique. Infrastructures modernes.",
            conseils: "Prenez un bon imperméable et visitez l'Ecosse.",
            pros: ["Immersion Anglais", "Coût vs Londres", "Proximité Leeds"],
            cons: ["Météo", "Ville industrielle"],
            contact: { mail: "clement.verin@isima.fr" }
          }
        ]
      }
    };

    // ==========================================
    // LOGIQUE JS
    // ==========================================
    let currentData = null;
    let currentWitnessIndex = 0;

    function loadStory() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get('id');
      currentData = storiesDB[id];
      if (!currentData) return;

      document.title = "Témoignage - " + currentData.title;
      document.getElementById('d-title').innerText = currentData.title;
      document.getElementById('d-location').innerText = currentData.location;
      window.countryBackId = currentData.countryId;

      const tabsContainer = document.getElementById('tabs-container');
      tabsContainer.innerHTML = "";
      currentData.witnesses.forEach((w, index) => {
        const btn = document.createElement('div');
        btn.className = `witness-tab ${index === 0 ? 'active' : ''}`;
        const imgHtml = w.avatar ? `<img src="${w.avatar}">` : `<i class="fas fa-user-circle" style="font-size:1.5rem"></i>`;
        btn.innerHTML = `${imgHtml} ${w.name}`;
        btn.onclick = () => switchWitness(index);
        tabsContainer.appendChild(btn);
      });

      switchWitness(0);
    }

    function switchWitness(index) {
      currentWitnessIndex = index;
      const w = currentData.witnesses[index];

      // Onglets
      const tabs = document.querySelectorAll('.witness-tab');
      tabs.forEach((t, i) => {
        if(i === index) t.classList.add('active');
        else t.classList.remove('active');
      });

      // Slider
      const sliderContainer = document.getElementById('slides-container');
      sliderContainer.innerHTML = "";
      w.images.forEach((url, i) => {
        const div = document.createElement('div');
        div.className = `slide ${i === 0 ? 'active' : ''}`;
        div.style.backgroundImage = `url('${url}')`;
        sliderContainer.appendChild(div);
      });
      initSlider();

      // Textes
      document.getElementById('w-name').innerText = w.name;
      document.getElementById('w-filiere').innerText = w.filiere;
      document.getElementById('w-dates').innerText = w.dates;
      document.getElementById('w-type').innerText = w.type;

      const fields = ['visa', 'logement', 'argent', 'sante', 'telecom', 'quotidien', 'univ', 'conseils'];
      fields.forEach(f => {
        const el = document.getElementById('txt-' + f);
        // Important : innerHTML pour supporter le gras et les listes
        el.innerHTML = w[f] || "Non renseigné.";
        
        // Reset Accordéon
        el.classList.remove('clamped');
        const btn = el.parentElement.querySelector('.expand-btn');
        if(btn) btn.style.display = 'none';
        
        // Vérification taille après rendu (petit délai pour laisser le temps au DOM)
        setTimeout(() => {
          if (el.scrollHeight > 100) { // <--- SEUIL DÉTECTION (100px)
            el.classList.add('clamped');
            if(btn) {
              btn.style.display = 'flex';
              btn.classList.remove('active'); // Remettre flèche vers le bas
            }
          }
        }, 50);
      });

      // Pros / Cons
      const ulPros = document.getElementById('list-pros');
      ulPros.innerHTML = "";
      w.pros.forEach(item => ulPros.innerHTML += `<li>${item}</li>`);

      const ulCons = document.getElementById('list-cons');
      ulCons.innerHTML = "";
      w.cons.forEach(item => ulCons.innerHTML += `<li>${item}</li>`);

      // Contacts
      const contactText = document.getElementById('contact-text');
      const cArea = document.getElementById('contact-area');
      cArea.innerHTML = ""; 

      const hasContact = w.contact && (w.contact.mail || w.contact.linkedin || w.contact.insta || w.contact.discord);

      if (hasContact) {
        contactText.innerText = `Besoin de précisions ? Contacte ${w.name} via ses réseaux !`;
        if(w.contact.mail) cArea.innerHTML += `<a href="${w.contact.mail}" class="contact-btn"><i class="fas fa-envelope"></i> Mail</a>`;
        if(w.contact.linkedin) cArea.innerHTML += `<a href="${w.contact.linkedin}" target="_blank" class="contact-btn btn-linkedin"><i class="fab fa-linkedin"></i> LinkedIn</a>`;
        if(w.contact.insta) cArea.innerHTML += `<a href="${w.contact.insta}" target="_blank" class="contact-btn btn-insta"><i class="fab fa-instagram"></i> Instagram</a>`;
        if(w.contact.discord) cArea.innerHTML += `<a href="#" onclick="alert('Discord : ${w.contact.discord}'); return false;" class="contact-btn btn-discord"><i class="fab fa-discord"></i> Discord</a>`;
      } else {
        contactText.innerText = "Besoin de précisions ? Contacte Sophie Walsh en charge des Relations Internationales de l'ISIMA";
        cArea.innerHTML += `<a href="mailto:sophie.walsh@uca.fr" class="contact-btn"><i class="fas fa-envelope"></i> sophie.walsh@uca.fr</a>`;
      }
    }

    // Fonction Accordéon (Lire la suite)
    function toggleText(btn) {
      const content = btn.parentElement.querySelector('.tc-content');
      content.classList.toggle('clamped');
      btn.classList.toggle('active');
    }

    // Slider Logic
    let currentSlide = 0;
    let slides;
    function initSlider() { slides = document.querySelectorAll('.slide'); currentSlide = 0; }
    function showSlide(index) {
      if (!slides || slides.length === 0) return;
      slides.forEach(s => s.classList.remove('active'));
      currentSlide = (index + slides.length) % slides.length;
      slides[currentSlide].classList.add('active');
    }
    function nextSlide() { showSlide(currentSlide + 1); }
    function prevSlide() { showSlide(currentSlide - 1); }

    function goBack() { window.location.href = `country.html?id=${window.countryBackId || ''}`; }

    document.addEventListener('DOMContentLoaded', loadStory);
  </script>
</body>
</html>
